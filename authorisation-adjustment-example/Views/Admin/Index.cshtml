@using Adyen.Model.Recurring;
@using adyen_dotnet_authorisation_adjustment_example.Models;
@{
    ViewData["Title"] = "Adyen Hotel Admin View";
    List<BookingPaymentModel> bookingPayments = ViewBag.BookingPayments;
}

<div class="main-container">
    <div class="info">
        <h1>ADMIN PANEL</h1>
        <div class="admin-panel-container">
            <p>This <b>admin panel</b> shows all payments for hotel bookings. In order to perform actions on each of the bookings, follow the readme to ensure that you have setup your webhooks correctly to receive updates to the payments asynchronously. </p>
            <p>Select a pre-authorised payment to adjust the payment amount. To learn more, check out the documentation about <a href="https://docs.adyen.com/online-payments/classic-integrations/modify-payments/adjust-authorisation"> authorisation adjustments.</a></p>
        </div>
    </div>
    <br/>
    <div class="admin-panel-payment-container"> 
    @{
        if (bookingPayments == null || !bookingPayments.Any())
        {
            <p>
                <b>No payments are stored. You can make a card payment in the <a href="/">Shopper View</a>.
                </b>
            </p>
        }
        else
        {
            @foreach(var payment in bookingPayments)
            {
                <ul class="adminList">   
                    <b>Result Code: @payment.ResultCode </b>
                     @if (payment.ResultCode == "Authorised")
                     {
                        <li>
                            <b>Payment Amount:</b> @payment.Currency @(payment.Amount/100L)<br/>
                        </li>
                      }
                     else
                     {
                        <li>
                            <b>Refusal Reason:</b> (@payment.RefusalReason)
                        </li>
                     }
                     <b>PspReference: @payment.PspReference</b>
                     <b>Reference:</b> @payment.Reference<br/>
                     <b>DateTime:</b> @payment.DateTime<br/>
                </ul>
            }
        }
    }
    </div>
</div>